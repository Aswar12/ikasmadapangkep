<!DOCTYPE html>
<html>
<head>
    <title>Test Photo Upload</title>
    <style>
        .container { max-width: 600px; margin: 50px auto; padding: 20px; }
        .photo-container { position: relative; width: 150px; height: 150px; margin: 20px auto; border-radius: 50%; overflow: hidden; border: 4px solid #3b82f6; }
        .photo-container img { width: 100%; height: 100%; object-fit: cover; }
        .photo-placeholder { background: #e0e7ff; display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; }
        .camera-btn { position: absolute; bottom: 8px; right: 8px; background: #3b82f6; color: white; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .save-btn { background: #16a34a; color: white; padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; margin-top: 10px; }
        .save-btn:disabled { background: #9ca3af; cursor: not-allowed; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Test Upload Foto Profile</h2>
        
        <div class="photo-container">
            <div id="photo-placeholder" class="photo-placeholder">
                <span>ðŸ‘¤</span>
            </div>
            <img id="preview-photo" src="" alt="" class="hidden">
            <label for="profile_photo" class="camera-btn">ðŸ“·</label>
            <input type="file" id="profile_photo" style="display: none;" accept="image/jpeg,image/png,image/jpg,image/gif">
        </div>
        
        <div style="text-align: center;">
            <button id="save-photo-btn" class="save-btn" disabled>Simpan Foto</button>
        </div>
        
        <div id="result" style="margin-top: 20px; padding: 10px; border-radius: 4px;"></div>
    </div>

    <script>
        const profilePhotoInput = document.getElementById('profile_photo');
        const previewPhoto = document.getElementById('preview-photo');
        const photoPlaceholder = document.getElementById('photo-placeholder');
        const savePhotoBtn = document.getElementById('save-photo-btn');
        const result = document.getElementById('result');

        if (profilePhotoInput) {
            profilePhotoInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    // Validate file type
                    const allowedTypes = ['image/jpeg', 'image/png', 'image/jpg', 'image/gif'];
                    if (!allowedTypes.includes(file.type)) {
                        result.style.background = '#fee2e2';
                        result.style.color = '#dc2626';
                        result.textContent = 'Format file tidak didukung. Gunakan JPEG, PNG, JPG, atau GIF.';
                        this.value = '';
                        return;
                    }
                    
                    // Validate file size (2MB)
                    if (file.size > 2 * 1024 * 1024) {
                        result.style.background = '#fee2e2';
                        result.style.color = '#dc2626';
                        result.textContent = 'Ukuran file terlalu besar. Maksimal 2MB.';
                        this.value = '';
                        return;
                    }
                    
                    result.textContent = '';
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        previewPhoto.src = e.target.result;
                        previewPhoto.classList.remove('hidden');
                        photoPlaceholder.classList.add('hidden');
                        savePhotoBtn.disabled = false;
                    }
                    reader.readAsDataURL(file);
                } else {
                    savePhotoBtn.disabled = true;
                }
            });
        }

        if (savePhotoBtn) {
            savePhotoBtn.addEventListener('click', function() {
                if (!profilePhotoInput.files[0]) {
                    result.style.background = '#fee2e2';
                    result.style.color = '#dc2626';
                    result.textContent = 'Pilih foto terlebih dahulu.';
                    return;
                }
                
                result.style.background = '#dcfce7';
                result.style.color = '#16a34a';
                result.textContent = 'Test berhasil! File siap untuk diupload: ' + profilePhotoInput.files[0].name + ' (' + Math.round(profilePhotoInput.files[0].size / 1024) + ' KB)';
            });
        }
    </script>
</body>
</html>
